#!/usr/bin/env ruby

require 'aws-cli'

require "optparse"
opts = ARGV.getopts("v", "verbose")

domain_name = ARGV.shift

sdb_client = AwsCli.create_sdb_client
domain = sdb_client.domains[domain_name]
print "items = ", domain.items.count, "\n"

domain.items.each do |item|
  puts "  #{item.name.inspect}"
  item.attributes.each do |attribute|
    puts "    #{attribute.name.inspect} = #{attribute.values.inspect}"
  end
end
