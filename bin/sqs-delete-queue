#!/usr/bin/env ruby

require 'aws-cli'

require "optparse"
opts = ARGV.getopts("v", "verbose")

sqs_client = AwsCli.create_sqs_client

queue_name = ARGV.shift

queue = begin
  sqs_client.queues.named(queue_name)
rescue AWS::SQS::Errors::NonExistentQueue => e
  $stderr.puts "Queue #{queue_name} does not exist, not deleting"
  nil
end
exit if queue.nil?

queue.delete
puts "Deleted queue #{queue_name}"
